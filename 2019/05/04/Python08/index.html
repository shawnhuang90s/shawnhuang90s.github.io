<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Python 中的模块"><meta name="keywords" content="Python"><meta name="author" content="shawnhuang90s"><meta name="copyright" content="shawnhuang90s"><title>Python 中的模块 | Shawnhuang90s' Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5dab6484be977b815f981156440c8d81";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-139390935-1', 'auto');
ga('send', 'pageview');</script><link rel="dns-prefetch" href="http://ta.qq.com"><script>(function() {
   var hm = document.createElement("script");
   hm.src = "https://tajs.qq.com/stats?sId=66402713";
   var s = document.getElementsByTagName("script")[0];
   s.parentNode.insertBefore(hm, s);
 })();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#序列化模块"><span class="toc-number">1.</span> <span class="toc-text">序列化模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#加密模块"><span class="toc-number">2.</span> <span class="toc-text">加密模块</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://i.postimg.cc/yxvCyRT3/avatar.jpg"></div><div class="author-info__name text-center">shawnhuang90s</div><div class="author-info__description text-center">Python  Django  Linux  Mysql  项目部署</div><div class="follow-button"><a href="https://github.com/shawnhuang90s">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">11</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">4</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">2</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="https://molunerfinn.com">Molunerfinn</a><a class="author-info-links__name text-center" href="https://www.cnblogs.com/shawnhuang">MyBlog</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://i.postimg.cc/MHJ94GhS/timg.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Shawnhuang90s' Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">Python 中的模块</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-05-04</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Python-基础/">Python 基础</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2.1k</span><span class="post-meta__separator">|</span><span>阅读时长: 8 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><ul>
<li>序列化模块</li>
<li>加密模块</li>
</ul>
<a id="more"></a>
<h2 id="序列化模块"><a href="#序列化模块" class="headerlink" title="序列化模块"></a>序列化模块</h2><ol>
<li><p>网络数据传输只能通过 <code>bytes</code> 类型</p>
</li>
<li><p>文件写入内容（注意不是存储）可以是 <code>bytes</code>，也可以是 <code>str</code></p>
</li>
<li><p>示例说明：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dic = &#123;<span class="string">"name"</span>: <span class="string">"太白金星"</span>, <span class="string">"hobby"</span>: [<span class="string">"戒烟"</span>, <span class="string">"烫不了头"</span>, <span class="string">"戒酒"</span>]&#125;</span><br><span class="line"><span class="comment"># 将 dic 转化为 str</span></span><br><span class="line">s1 = str(dic)</span><br><span class="line"><span class="comment"># 将 str 转化为 bytes</span></span><br><span class="line">b1 = s1.encode(<span class="string">"utf-8"</span>)</span><br><span class="line">print(b1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># b"&#123;'name': '\xe5\xa4\xaa\xe7\x99\xbd\xe9\x87\x91\xe6\x98\x9f', 'hobby': ['\xe6\x88\x92\xe7\x83\x9f', '\xe7\x83\xab\xe4\xb8\x8d\xe4\xba\x86\xe5\xa4\xb4', '\xe6\x88\x92\xe9\x85\x92']&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 bytes 转化为 str</span></span><br><span class="line">s2 = b1.decode(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="comment"># 将 str 转化为 dic</span></span><br><span class="line">dic2 = eval(s2)</span><br><span class="line">print(dic2, type(dic2))</span><br><span class="line"><span class="comment"># &#123;'name': '太白金星', 'hobby': ['戒烟', '烫不了头', '戒酒']&#125; &lt;class 'dict'&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>上面的方法虽然可行，但是 <code>eval()</code> 的使用很容易被黑客截取并替换成病毒文件</p>
<p>为了防止这种情况的出现，这里需要用到序列化模块：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 序列化过程：将数据(数据结构，非字符串) 转化成 特殊的字符串(可以用于网络传输)</span></span><br><span class="line"><span class="comment"># 反序列化过程：另外还得将这个 特殊的字符串 转化成 原来的数据结构</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python中的序列化模块有三种：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式一：</span></span><br><span class="line"><span class="comment"># import json</span></span><br><span class="line">    <span class="comment"># json 序列化模块是所有语言通用的一种标准，也是一种数据转化格式</span></span><br><span class="line">    <span class="comment"># 也就是说 Python 中的字典，通过 json 模块转化成 bytes 来进行网络传输成 java 的字典</span></span><br><span class="line">    <span class="comment"># str, int, bool, dict, list(tuple), None （没有集合）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式二：</span></span><br><span class="line"><span class="comment"># import pickle</span></span><br><span class="line">    <span class="comment"># pickle 也是序列化模块，只支持Python语言中所有数据类型(包括对象)的网络传输(用的少)</span></span><br><span class="line">    <span class="comment"># 优点是写入文件时，可以写入多个</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式三：</span></span><br><span class="line"><span class="comment"># import shelve  # 了解</span></span><br><span class="line">    <span class="comment"># shelve 序列化模块，只支持Python，一般与文件相关，即通过它把数据写入文件，拿出来后再反解成原数据类型</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>序列化模块之 <code>json</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># json：安全模式的网络传输</span></span><br><span class="line"><span class="comment"># 项目中一般使用 json 来写</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一对方法：dumps loads</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">dic = &#123;<span class="string">"name"</span>: <span class="string">"太白金星"</span>, <span class="string">"hobby"</span>: [<span class="string">"戒烟"</span>, <span class="string">"烫不了头"</span>, <span class="string">"戒酒"</span>]&#125;</span><br><span class="line"><span class="comment"># json的序列化过程</span></span><br><span class="line">s = json.dumps(dic)</span><br><span class="line">print(s, type(s))</span><br><span class="line"></span><br><span class="line"><span class="comment"># # &#123;"name": "\u592a\u767d\u91d1\u661f", "hobby": ["\u6212\u70df", "\u70eb\u4e0d\u4e86\u5934", "\u6212\u9152"]&#125; &lt;class 'str'&gt;</span></span><br><span class="line"></span><br><span class="line">s = json.dumps(dic, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">print(s)</span><br><span class="line"><span class="comment"># &#123;"name": "太白金星", "hobby": ["戒烟", "烫不了头", "戒酒"]&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># json 的反序列化过程</span></span><br><span class="line">dic1 = json.loads(s)</span><br><span class="line">print(dic1, type(dic1))</span><br><span class="line"><span class="comment"># &#123;'name': '太白金星', 'hobby': ['戒烟', '烫不了头', '戒酒']&#125; &lt;class 'dict'&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意一点：</span></span><br><span class="line">dic = &#123;<span class="string">"name"</span>: <span class="string">"太白金星"</span>, <span class="string">"hobby"</span>: [<span class="string">"戒烟"</span>, <span class="string">"烫不了头"</span>, <span class="string">"戒酒"</span>]&#125;</span><br><span class="line">print(dic)</span><br><span class="line"><span class="comment"># &#123;'name': '太白金星', 'hobby': ['戒烟', '烫不了头', '戒酒']&#125;</span></span><br><span class="line"><span class="comment"># 字符串都是单引号，不过写的是双引号还是单引号</span></span><br><span class="line"><span class="comment"># 而上面的json.dumps 用法结果是双引号</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二对 dump load 与文件相关</span></span><br><span class="line"></span><br><span class="line">dic = &#123;<span class="string">"name"</span>: <span class="string">"太白金星"</span>, <span class="string">"hobby"</span>: [<span class="string">"戒烟"</span>, <span class="string">"烫不了头"</span>, <span class="string">"戒酒"</span>]&#125;</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"序列化.json"</span>, encoding=<span class="string">"utf-8"</span>, mode=<span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># json.dump(dic, f)</span></span><br><span class="line">    json.dump(dic, f, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"序列化.json"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f2:</span><br><span class="line">    ret = json.load(f2)</span><br><span class="line">print(ret, type(ret))</span><br><span class="line"><span class="comment"># &#123;'name': '太白金星', 'hobby': ['戒烟', '烫不了头', '戒酒']&#125; &lt;class 'dict'&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>json</code> 模块的参数讲解</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ensure_ascii=False 显示中文</span></span><br><span class="line"><span class="comment"># sort_keys 按键的首字母的 ascii 排序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">dic = &#123;<span class="string">"name"</span>: <span class="string">"太白金星"</span>,</span><br><span class="line">       <span class="string">"hobby"</span>: [<span class="string">"戒烟"</span>, <span class="string">"烫不了头"</span>, <span class="string">"戒酒"</span>],</span><br><span class="line">       <span class="string">"age"</span>: <span class="number">18</span>,</span><br><span class="line">       <span class="string">"money"</span>: <span class="string">"一个亿"</span>&#125;</span><br><span class="line">s = json.dumps(dic, ensure_ascii=<span class="literal">False</span>, sort_keys=<span class="literal">True</span>)</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#123;"age": 18, "hobby": ["戒烟", "烫不了头", "戒酒"], "money": "一个亿", "name": "太白金星"&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>json</code> 与 <code>bytes</code> 的区别：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># json 与 bytes 的区别：</span></span><br><span class="line"><span class="comment"># bytes 只能操作str,用于网络传输</span></span><br><span class="line"><span class="comment"># json 可以操作 str, int, bool, dict, list(tuple), None（没有集合）</span></span><br><span class="line"><span class="comment"># 用于网络传输，写入文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过 json 将多个字典写入一个文件</span></span><br><span class="line"><span class="comment"># 如果用 dump load 一个文件只能写入一个数据结构！！！</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">dic1 = &#123;<span class="string">"name"</span>: <span class="string">"abc"</span>&#125;</span><br><span class="line">dic2 = &#123;<span class="string">"name"</span>: <span class="string">"def"</span>&#125;</span><br><span class="line">dic3 = &#123;<span class="string">"name"</span>: <span class="string">"xyz"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面这样不行</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"多个字典.json"</span>, encoding=<span class="string">"utf-8"</span>, mode=<span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(dic1, f)</span><br><span class="line">    json.dump(dic2, f)</span><br><span class="line">    json.dump(dic3, f)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"多个字典.json"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">    ret1 = json.load(f1)</span><br><span class="line">    ret2 = json.load(f1)</span><br><span class="line">    ret3 = json.load(f1)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 如果使用 dumps loads 可以将多个数据结构写入到文件中：</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">dic1 = &#123;<span class="string">"name"</span>: <span class="string">"abc"</span>&#125;</span><br><span class="line">dic2 = &#123;<span class="string">"name"</span>: <span class="string">"def"</span>&#125;</span><br><span class="line">dic3 = &#123;<span class="string">"name"</span>: <span class="string">"xyz"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"多个字典.json"</span>, encoding=<span class="string">"utf-8"</span>, mode=<span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(json.dumps(dic1) + <span class="string">"\n"</span>)</span><br><span class="line">    f.write(json.dumps(dic2) + <span class="string">"\n"</span>)</span><br><span class="line">    f.write(json.dumps(dic3) + <span class="string">"\n"</span>)</span><br><span class="line"><span class="comment"># 上面有结果，但是会飘红，不影响后面的操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"多个字典.json"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f1:</span><br><span class="line">        print(json.loads(line))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#123;"name": "abc"&#125;</span></span><br><span class="line"><span class="comment"># &#123;"name": "def"&#125;</span></span><br><span class="line"><span class="comment"># &#123;"name": "xyz"&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 总结</span></span><br><span class="line"><span class="comment"># dumps loads 用于网络传输和多个数据写入文件</span></span><br><span class="line"><span class="comment"># dump load 只能用于一个数据结构写入文件</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>一个小细节</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">dic = &#123;<span class="number">1</span>: <span class="string">"alex"</span>&#125;</span><br><span class="line">t = json.dumps(dic)</span><br><span class="line"></span><br><span class="line">print(t)  <span class="comment"># &#123;"1": "alex"&#125;</span></span><br><span class="line"><span class="comment"># 发现数字1变成字符串形式了</span></span><br><span class="line"></span><br><span class="line">print(json.loads(t))  <span class="comment"># &#123;'1': 'alex'&#125;</span></span><br><span class="line"><span class="comment"># 还原过后已经没有整数型了</span></span><br><span class="line"><span class="comment"># 算是一个 bug，一个坑</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>序列化模块之 <code>pickle</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 利用 dump 和 load 将多个数据写入文件，json的不行</span></span><br><span class="line"></span><br><span class="line">dic1 = &#123;<span class="string">"name"</span>: <span class="string">"abc"</span>&#125;</span><br><span class="line">dic2 = &#123;<span class="string">"name"</span>: <span class="string">"def"</span>&#125;</span><br><span class="line">dic3 = &#123;<span class="string">"name"</span>: <span class="string">"xyz"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意这里不用写明 encoding，因为带 b 的不能用！！！</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"p2.pickle"</span>, mode=<span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    pickle.dump(dic1, f)</span><br><span class="line">    pickle.dump(dic2, f)</span><br><span class="line">    pickle.dump(dic3, f)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"p2.pickle"</span>, mode=<span class="string">"rb"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">    ret1 = pickle.load(f1)</span><br><span class="line">    ret2 = pickle.load(f1)</span><br><span class="line">    ret3 = pickle.load(f1)</span><br><span class="line"></span><br><span class="line">print(ret1, ret2, ret3)</span><br><span class="line"><span class="comment"># &#123;'name': 'abc'&#125; &#123;'name': 'def'&#125; &#123;'name': 'xyz'&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"p3.pickle"</span>, mode=<span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    pickle.dump(func, f)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"p3.pickle"</span>, mode=<span class="string">"rb"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">    ret = pickle.load(f1)</span><br><span class="line"></span><br><span class="line">ret()  <span class="comment"># 666</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="加密模块"><a href="#加密模块" class="headerlink" title="加密模块"></a>加密模块</h2><ol>
<li><p>摘要算法是一堆加密算法的集合体</p>
</li>
<li><p><code>hashlib</code> 的规则：将 <code>str</code> 通过算法得到一串等长度的数字</p>
</li>
<li><p>不同的字符串转化成的数字不同</p>
</li>
<li><p>相同的字符串即使在不同的计算机，只要使用相同的加密方式，转化成的数字一定相同</p>
</li>
<li><p><code>hashlib</code> 加密不可逆，不能破解</p>
</li>
<li><p>示例说明一：<code>md5</code> 加密法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 给密码加密</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">ret = hashlib.md5()</span><br><span class="line">ret.update(<span class="string">"好123"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># 51cb75f82eceb17b86f019e01618d75e</span></span><br><span class="line"></span><br><span class="line">ret = hashlib.md5()</span><br><span class="line">ret.update(<span class="string">"asjdlkajlkajsdlkajljlajsalsj"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># 77e2bcc002a6a2a957519303d16a976a</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以看出，不管字符串多长，它都是转化成一样长的数字</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加盐——让密码更复杂</span></span><br><span class="line">ret = hashlib.md5(<span class="string">"加盐加密"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">ret.update(<span class="string">"123456"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># b08404ec951d75b6da37fdd1bfb8c1e9</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 动态盐</span></span><br><span class="line">username = input(<span class="string">"请输入用户名: "</span>).strip()</span><br><span class="line"><span class="comment"># ret = hashlib.md5(username.encode("utf-8"))</span></span><br><span class="line"><span class="comment"># 还可以截取用户输入的长度来更加动态的加盐</span></span><br><span class="line">ret = hashlib.md5(username[::<span class="number">2</span>].encode(<span class="string">"utf-8"</span>))</span><br><span class="line">ret.update(<span class="string">"123456"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># asdak</span></span><br><span class="line"><span class="comment"># 331c5caa07f18d43b7c6302202bd4d2d</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>示例说明二：<code>sha</code> 加密法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># md5 加密效率快，通用，安全性相对差</span></span><br><span class="line"><span class="comment"># sha 系列，算法更好，安全性高，效率低，耗时长</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sha系列</span></span><br><span class="line">ret = hashlib.sha512()</span><br><span class="line">ret.update(<span class="string">"aksdjalksjdalkj"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># 093bc658d3b1a40ba2f4b41a8f86cca8cb79f7808e52</span></span><br><span class="line"><span class="comment"># 75e69303988afd938722f97d5ac4565f2a494d75dabcdbca6</span></span><br><span class="line"><span class="comment"># 1e446fd7c4a14c29bfa711a7a34fa84d1e2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加盐</span></span><br><span class="line">ret = hashlib.sha512(<span class="string">"好好学习"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">ret.update(<span class="string">"aksdjalksjdalkj"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># a17ae4ede113d8969df70b5a6547b41164dfcd56423d</span></span><br><span class="line"><span class="comment"># 4d2a761f625558f22b4791f4808132db994cbc9ec76ccdb</span></span><br><span class="line"><span class="comment"># 6b3a44d17b71e043fbcbc5584f96f9a38b88d</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 动态盐</span></span><br><span class="line">username = input(<span class="string">"请输入用户名："</span>).strip()</span><br><span class="line">ret = hashlib.sha512(username.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">ret.update(<span class="string">"aksdjalksjdalkj"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"><span class="comment"># askdj</span></span><br><span class="line"><span class="comment"># ee97bc4ad328e098fef08395c07309adf7746e37dec81d</span></span><br><span class="line"><span class="comment"># 2e123d34fa81ffceaaa9c15f4cb2ba8544c5a9217640e0e</span></span><br><span class="line"><span class="comment"># 48953f12dd0ac820176a3982260ad70fc8f</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>文件校验示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文件校验</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_md5</span><span class="params">(file)</span>:</span></span><br><span class="line">    ret = hashlib.md5()</span><br><span class="line">    <span class="keyword">with</span> open(file, encoding=<span class="string">"utf-8"</span>, mode=<span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        ret.update(f.read())</span><br><span class="line">        <span class="keyword">return</span> ret.hexdigest()</span><br><span class="line">print(check_md5(<span class="string">"文件校验1"</span>))</span><br><span class="line">print(check_md5(<span class="string">"文件校验2"</span>))  </span><br><span class="line"><span class="comment"># 注意一定要有两个文件，内容一样时打印的结果才一样</span></span><br><span class="line"><span class="comment"># 文件校验1与当前文件在同一个文件夹</span></span><br><span class="line"><span class="comment"># 这里有个问题，如果文件太大占内存，因此用 for 循环</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ret = hashlib.md5()</span><br><span class="line">ret.update(<span class="string">"好好学习并且天天向上"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"></span><br><span class="line">ret.update(<span class="string">"好好学习"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">ret.update(<span class="string">"并且"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">ret.update(<span class="string">"天天向上"</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">print(ret.hexdigest())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面两个结果一样</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>大文件校验示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文件较大时，按照一行一行读取</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_md5</span><span class="params">(file)</span>:</span></span><br><span class="line">    ret = hashlib.md5()</span><br><span class="line">    <span class="keyword">with</span> open(file, mode=<span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            ret.update(line)</span><br><span class="line">        <span class="keyword">return</span> ret.hexdigest()</span><br><span class="line">print(check_md5(<span class="string">"test"</span>))</span><br><span class="line">print(check_md5(<span class="string">"test01"</span>))</span><br><span class="line"><span class="comment"># 8a9a779e5bacbd752fb5deb05581f86e</span></span><br><span class="line"><span class="comment"># 8a9a779e5bacbd752fb5deb05581f86e</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按照字节读取</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_md5</span><span class="params">(file)</span>:</span></span><br><span class="line">    ret = hashlib.md5()</span><br><span class="line">    <span class="keyword">with</span> open(file, mode=<span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            content = f.read(<span class="number">1024</span>)</span><br><span class="line">            <span class="comment"># 这个表示每次最多读取这么多字节，而不是每次读取1024个字节</span></span><br><span class="line">            <span class="keyword">if</span> content:  <span class="comment"># 如果真表示一直能取到内容</span></span><br><span class="line">                ret.update(content)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">                <span class="comment"># 因此这里文件的最后内容不够1024个字节时，把剩下的读取出来，然后退出</span></span><br><span class="line">        <span class="keyword">return</span> ret.hexdigest()</span><br><span class="line">print(check_md5(<span class="string">"test"</span>))</span><br><span class="line">print(check_md5(<span class="string">"test01"</span>))</span><br><span class="line"><span class="comment"># 8a9a779e5bacbd752fb5deb05581f86e</span></span><br><span class="line"><span class="comment"># 8a9a779e5bacbd752fb5deb05581f86e</span></span><br></pre></td></tr></table></figure></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">shawnhuang90s</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.shawnhuang90s.tech/2019/05/04/Python08/">http://www.shawnhuang90s.tech/2019/05/04/Python08/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.shawnhuang90s.tech">Shawnhuang90s' Blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/05/05/Python09/"><i class="fa fa-chevron-left">  </i><span>Python 中的模块</span></a></div><div class="next-post pull-right"><a href="/2019/05/04/Python07/"><span>Python 中的函数进阶(三)</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://i.postimg.cc/MHJ94GhS/timg.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 By shawnhuang90s</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>